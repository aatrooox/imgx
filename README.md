# IMGX

> 一行 URL 快速生成图片

## ‼️‼️迁移中
在升级到 0.6.0 之后，我的计划是**开发一套模板录入+预设保存的机制**，用于解决一大堆参数的问题，保存预设时会得到一个 4(或3)位数的预设码，这个预设码包含了使用哪个模板、使用什么默认样式等信息。

于是我引入了 Prisma、Mysql、Redis，以满足未来的需求。

但敲了两天代码后，发现现在的项目结构有点别扭。

前端功能很少，大部分集中在后端，但又依赖了 `createSSRApp` 和 `renderToString`，所以我再调研后决定去除这两个依赖，直接生成 VNode 来渲染出 SVG。

而且这还仅仅是 `IMG` 部分的功能，`X` 部分我还没开发，所以为了避免未来代码烂掉。

我新开了一个仓库：[imgx-nitro](https://github.com/aatrooox/imgx-nitro)，用于继续开发新的 Api 功能。

此仓库先保留，但暂时不会在这个基础上写新功能了，新的前端仓库也会基于 `Vue3` 再开一个。

有开发能力的小伙伴可以自行 `Fork` 本仓库来魔改

## 背景

有时候写文章时需要上传封面图，大部分情况我只需要简单的文字、LOGO、强调文字等即可。

现有的App、Web端需要我打开他们的平台，然后选择合适的模板，最后还要充个会员，不然就限制我下载图片的大小，给我加个水印什么的。

此 API 可以帮助我快速在任意场景下拿到一张想要的图片。必要时可以下载，临时使用直接用链接。

并且如果是文章中配图，大部分技术平台都支持自动转存，很省心。

## 定位

本项目属于 `“生产者”` ，接收参数，提供内容，支持上层建立图片相关的App。

API分为两条主线：

1. `IMG` 生成图片 
   1. 如： `POST /api/img/xxxx`
   2. 如： `GET imgx.zzao.club/[预设码]/内容文字文字内容`
2. `X`  裁剪、拼接、压缩图片

## 👍API优先

本项目的更新以 Api 优先（参考定位），前端界面不一定很快增加参数配置界面。

因为核心诉求就是**脱离开任何环境直接使用**。Api较长/参数太多的问题会很快解决！

## 使用
API格式：https://imgx.zzao.club/api/img/[比例编号]/[模板编号]/[文本内容]?[参数]=xxx

如：  https://imgx.zzao.club/api/img/001/001/[Nuxt实战]从入门到放弃系列+点击就送屠龙宝刀?bgColor=292a3a-536976&accentColor=0088a9&color=ffffff


![](https://imgx.zzao.club/api/img/001/001/[Nuxt实战]从入门到放弃系列+点击就送屠龙宝刀?bgColor=292a3a-536976&accentColor=0088a9&color=ffffff)


## 功能

### 比例
- 001：2.35:1 => 公众号
- 002：1:1 => 头像
- 003: 4:3 => ?
- 004: 3:4 => 小红书等
- 005: 16:9 => 视频封面
- **新比例请联系我～**

### 模板001

此模板针对 **字数不多**、**字号较大** 的使用场景。 比如文章封面、部分自媒体平台的配图。

比如高清(x2)的公众号封面配图（2.35:1）

![](https://imgx.zzao.club/api/img/001/001/[Deepseek]+108大使用技巧+只剩+[66]个名额?bgColor=ff758c-ff7eb3&accentColor=0088a9&color=ffffff&ratio=2)

比如小红书配图（3:4）

![](https://imgx.zzao.club/api/img/004/001/[Deepseek]+108大使用技巧+只剩+[66]个名额?bgColor=ff7e5f-feb47b&accentColor=0088a9&color=ffffff&ratio=2&center=1)
## 语法
| 语法 | 含义 | 说明 |
| --- | --- | --- |
| `**` | 强调文字 | 支持配置强调色，**后续**会支持多种强调方式 |
| `[xxx]` | emoji | [twemoji](https://icon-sets.iconify.design/twemoji/?category=Emoji) |
| `+` | 换行 | 文字主动换行，**后续**支持每行文字设置不同颜色 |

## query参数

| 参数 | 含义 | 参考值 | 说明 |
| --- | --- | --- | --- |
| bgColor | 背景色 | 292a3a-536976 | 目前支持两个颜色，中间用`-`分割，从左到右径向渐变 |
| accentColor | 强调色 | 0088a9 | [xxx] 包裹的文字|
| color | 文字颜色 | ffffff |  当前表示所有文字的配色，即将支持多个颜色，匹配每行文字|
| ratio | 几倍图 | 1 | 要么 1 要么 2 |
| align | 是否居中 | 1 | 默认左对齐，居中时为整体文字都居中 |
| fontSize | 字号 | 30 | - |
| iconSize | Emoji大小 | 30 | 默认和 fontSize 一致 |
| closeColorRandom | 是否关闭随机颜色 | 0 | 默认开启； 传入 0 关闭；指定颜色优先级更高 |
| padding | 最外层内间距 | 30px | - |
| textWrapBgColor | 内容区域背景色 | rgba(255,255,255,0.8) | - |
| textWrapPadding | 内容区域内间距 | 30px | - |
| textWrapShadow | 内容区域阴影 | lg | - |
| textWrapRounded | 内容区域圆角大小 | lg | - |

## 开发规划
### 当前版本
- [x] 简单的文字生成图片
- [x] 支持换行
- [x] 支持强调色 `[强调的内容]`  
- [x] 支持背景色 query.bgColor （两个颜色的渐变色支持`-`分割）
- [x] 支持文字颜色 query.color
- [x] 支持随机颜色 默认开启随机, 但指定颜色优先
- [x] 支持居中或左对齐 query.center === 1 ?
- [x] 支持多种比例的图片大小
- [x] 支持 x2 ~~x3~~ 等倍图 
- [x] 支持在背景上再设置一个内容背景色
- [x] 支持更多字体: 优设标体黑、抖音美好体
### 0.5.0
- [x] 每行文字不同颜色
- [x] 每行文字不同对齐方式
- [x] 每行强调文字不同颜色
### 0.6.0
- [ ] 所有参数保存到预设码
- [ ] 现有 get 请求改为 post
- [ ] 新增 get请求改为码+字

### 0.7.0
新增预设配置界面，登录后可配置，使用时无需登录

## 模板规划

- [x] 模板001：少文字、大字号。比如文章封面图、自媒体配图
- [ ] 模板002：多文字、小字号、带作者、日期、图片链接。比如读书卡片类、某些个人IP发一些水文
- [ ] 模板003：头像
- [ ] 模板004: 有趣的小票。比如各类点单小票、火车/动车票

## 新模板、功能建议、围观
发邮件给我：gnakzz@qq.com

添加微信好友 (请备注 IMGX)：

![](https://img.zzao.club/article/202412301618241.jpg)


## 致谢

- [v-satori](https://github.com/wobsoriano/v-satori)

## MIT
